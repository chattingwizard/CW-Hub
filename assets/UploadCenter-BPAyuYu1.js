import{u as ce,r as p,j as e,s as w,U as de,l as oe,C as me}from"./index-BP5YFlyp.js";import{r as pe,C as xe}from"./CreatorReportUpload-B-Xr32Nr.js";import{L as G}from"./loader-circle-BC4jqH9m.js";import{F as re}from"./file-spreadsheet-DOqBiMGl.js";import{X as ue}from"./x-g7em6QJH.js";import{C as he}from"./circle-check-big-QNW-He0O.js";import{C as fe}from"./circle-alert-CfHPc9GY.js";import{C as ge,a as ye}from"./chevron-up-RJvm1lta.js";import{C as _e}from"./clock-CVz5ENYo.js";import{T as ne}from"./trash-2-DXlVcyGl.js";import{A as be,a as je}from"./arrow-up-CEDtaFbc.js";import{A as we}from"./arrow-up-down-FJl0TFsn.js";const Ne=[[/^employees?$/,"employee_name"],[/^duration$|^date\/?time|^date$/,"date_range"],[/^groups?$|^teams?$/,"team_from_report"],[/^creators?$/,"creators"],[/^sales\s*per\s*hour$/,"sales_per_hour"],[/^sales$/,"sales"],[/^messages?\s*sent\s*per\s*hour$/,"messages_per_hour"],[/^direct\s*messages?\s*sent$/,"messages_sent"],[/^direct\s*ppvs?\s*sent$|^ppvs?\s*sent$/,"ppvs_sent"],[/^ppvs?\s*unlocked$/,"ppvs_unlocked"],[/^golden\s*ratio$/,"golden_ratio"],[/^unlock\s*rate$/,"unlock_rate"],[/^fans?\s*chatted$/,"fans_chatted"],[/^fans?\s*who\s*spent(\s*money)?$/,"fans_who_spent"],[/^fan\s*cvr$/,"fan_cvr"],[/^response\s*time(?!.*scheduled)/,"response_time_clocked"],[/^clocked\s*hours$/,"clocked_hours"],[/^character\s*count$/,"character_count"]];function ve(o){for(const[d,n]of Ne)if(d.test(o))return n}function C(o){if(typeof o=="number")return o;if(!o)return 0;const d=String(o).replace(/[$,%]/g,"").trim();return parseFloat(d)||0}function $e(o){if(typeof o=="number")return o;if(!o)return 0;const d=String(o).trim(),n=d.match(/^(\d+)h\s*(\d+)\s*min/i);if(n)return parseInt(n[1])+parseInt(n[2])/60;const m=d.match(/^(\d+)h$/i);if(m)return parseInt(m[1]);const x=d.match(/^(\d+)\s*min/i);if(x)return parseInt(x[1])/60;const h=d.match(/^(\d+):(\d{2})(?::(\d{2}))?$/);return h?parseInt(h[1])+parseInt(h[2])/60+(h[3]?parseInt(h[3])/3600:0):parseFloat(d.replace(/[$,%]/g,""))||0}function Ce(o){if(!o)return null;const n=String(o).match(/\d{4}-\d{2}-\d{2}/g);if(n&&n.length>=2){const m=new Date(n[0]+"T00:00:00"),x=new Date(n[1]+"T00:00:00"),h=Math.max(1,Math.round((x.getTime()-m.getTime())/864e5)+1);return{date:n[1],days:h}}return n&&n.length===1?{date:n[0],days:1}:null}function le(o){const d=o.replace(/[^0-9]/g,"");if(d.length>=6){const n=d.slice(0,2),m=d.slice(2,4);return`20${d.slice(4,6)}-${m}-${n}`}return"9999-99-99"}function ke(o){return[...o].sort((d,n)=>le(d.name).localeCompare(le(n.name)))}const ae=["Team Danilyn","Team Huckle","Team Ezekiel"];function ie(o){if(!o)return"";const d=o.replace(/^team\s+/i,"").trim().toLowerCase();for(const n of ae)if(n.toLowerCase().endsWith(d))return n;return o}async function De(){const o=new Map;try{const m=localStorage.getItem("cw_team_overrides");if(m){const x=JSON.parse(m);for(const[h,S]of Object.entries(x))S&&S!=="_dismissed"&&o.set(h,S)}}catch{}const{data:d}=await w.from("chatter_team_overrides").select("employee_name, team");if(d)for(const m of d)m.team&&m.team!=="_dismissed"&&o.set(m.employee_name,m.team);const{data:n}=await w.from("chatter_daily_stats").select("date").order("date",{ascending:!1}).limit(1);if(n&&n.length>0){const m=n[0].date,{data:x}=await w.from("chatter_daily_stats").select("employee_name, team").eq("date",m);if(x)for(const h of x){const S=h.employee_name.toLowerCase().trim().replace(/\s+/g," ");if(o.has(S))continue;const E=ie(h.team);ae.includes(E)&&o.set(S,E)}}return o}function Se({onUploadComplete:o}){const{profile:d}=ce(),[n,m]=p.useState(!1),[x,h]=p.useState([]),[S,E]=p.useState(!1),Q=p.useRef(null),U=p.useRef(null),Z=async s=>{try{if(s.size>10485760)throw new Error(`File too large (${(s.size/1024/1024).toFixed(1)} MB). Max 10 MB.`);if(!/\.(xlsx|xls|csv)$/i.test(s.name))throw new Error("Invalid file type.");const i=await pe(s);if(!i.length)throw new Error("Sheet is empty");if(i.length>1e4)throw new Error(`Too many rows (${i.length}).`);const N=i[0],v=new Map,u=[];for(const l of Object.keys(N)){const r=l.toLowerCase().trim();if(!r)continue;const b=ve(r);b?v.set(l,b):u.push(l)}const k=new Set(v.values());if(!k.has("employee_name"))throw new Error(`Missing "Employee" column. Found: ${Object.keys(N).join(", ")}`);if(!k.has("sales"))throw new Error(`Missing "Sales" column. Found: ${Object.keys(N).join(", ")}`);let T=null,M=1;const _=[],$=[];for(const l of i){const r={};for(const[A,H]of v)r[H]=l[A];const b=String(r.employee_name??"").trim();if(!b)continue;if(!T&&r.date_range){const A=Ce(r.date_range);A&&(T=A.date,M=A.days)}const Y=$e(r.clocked_hours),j=C(r.sales),B=C(r.messages_sent);if(Y<=0&&j<=0&&B<=0){$.includes(b)||$.push(b);continue}const D=String(r.team_from_report??"").trim(),I=b.toLowerCase().trim().replace(/\s+/g," "),R=U.current,P=(R==null?void 0:R.get(I))??ie(D);_.push({date:T||new Date().toISOString().split("T")[0],employee_name:b,team:P,creators:String(r.creators??""),sales:C(r.sales),messages_sent:Math.round(C(r.messages_sent)),ppvs_sent:Math.round(C(r.ppvs_sent)),ppvs_unlocked:Math.round(C(r.ppvs_unlocked)),golden_ratio:C(r.golden_ratio),unlock_rate:C(r.unlock_rate),fans_chatted:Math.round(C(r.fans_chatted)),fans_who_spent:Math.round(C(r.fans_who_spent)),fan_cvr:C(r.fan_cvr),response_time_clocked:r.response_time_clocked?String(r.response_time_clocked):null,clocked_hours:Y,sales_per_hour:C(r.sales_per_hour),character_count:Math.round(C(r.character_count)),messages_per_hour:C(r.messages_per_hour)})}if(!_.length)throw new Error(`No employees with clocked hours > 0. ${$.length>0?`Skipped (0h): ${$.slice(0,5).join(", ")}${$.length>5?"...":""}`:""}`);const{error:W}=await w.from("chatter_daily_stats").upsert(_,{onConflict:"date,employee_name"});if(W)throw W;const F=U.current,J={};try{const l=localStorage.getItem("cw_team_overrides");l&&Object.assign(J,JSON.parse(l))}catch{}const L=[];for(const l of _){const r=String(l.team),b=String(l.employee_name).toLowerCase().trim().replace(/\s+/g," ");ae.includes(r)&&!(F!=null&&F.has(b))&&(J[b]=r,L.push({employee_name:b,display_name:String(l.employee_name),team:r,source:"upload",updated_at:new Date().toISOString()}),F==null||F.set(b,r))}try{localStorage.setItem("cw_team_overrides",JSON.stringify(J))}catch{}L.length>0&&w.from("chatter_team_overrides").upsert(L,{onConflict:"employee_name",ignoreDuplicates:!0}).then(({error:l})=>{l&&console.warn("[Upload] Supabase overrides skipped:",l.message)}),d&&await w.from("csv_uploads").insert({uploaded_by:d.id,file_name:s.name,row_count:_.length,upload_type:"employee_report",report_date:T||null});const te=Array.from(v.entries()).map(([l,r])=>`${l} â†’ ${r}`).join(" | "),y=_[0],K=y?`Sample (${y.employee_name}): sales=${y.sales}, msgs=${y.messages_sent}, ppvs_sent=${y.ppvs_sent}, golden=${y.golden_ratio}, unlocked=${y.ppvs_unlocked}, unlock%=${y.unlock_rate}, fans=${y.fans_chatted}, spent=${y.fans_who_spent}, cvr=${y.fan_cvr}, hours=${y.clocked_hours}, $/hr=${y.sales_per_hour}, chars=${y.character_count}, msg/hr=${y.messages_per_hour}`:"",t=i[0],c=t?`Raw values: ${Object.entries(t).slice(0,8).map(([l,r])=>`${l}=${JSON.stringify(r)}`).join(", ")}`:"",a=_.reduce((l,r)=>l+(Number(r.sales)||0),0),f=[];return f.push(`Date: ${T||"today"} Â· ${_.length} employees Â· Total sales: $${a.toFixed(2)}`),f.push(`Mapping: ${te}`),K&&f.push(K),c&&f.push(c),$.length>0&&f.push(`${$.length} skipped: ${$.slice(0,3).join(", ")}${$.length>3?"...":""}`),u.length>0&&f.push(`Skipped columns: ${u.join(", ")}`),{fileName:s.name,type:"success",message:"Uploaded",details:f,reportDate:T}}catch(g){return{fileName:s.name,type:"error",message:g instanceof Error?g.message:"Upload failed"}}},V=async s=>{const g=ke(s);m(!0),h(g.map(i=>({fileName:i.name,type:"pending",message:"Waiting..."})));try{U.current=await De()}catch{U.current=new Map}for(let i=0;i<g.length;i++){h(v=>v.map((u,k)=>k===i?{...u,type:"processing",message:"Processing..."}:u));const N=await Z(g[i]);h(v=>v.map((u,k)=>k===i?N:u))}h(i=>{const N=i.filter(u=>u.type==="success"&&u.details).map(u=>{var T,M;const k=(M=(T=u.details)==null?void 0:T.find(_=>_.includes("Total sales:")))==null?void 0:M.match(/\$([\d,.]+)/);return k?parseFloat(k[1].replace(/,/g,"")):0}),v=N.reduce((u,k)=>u+k,0);return N.length>1?[...i,{fileName:"ðŸ“Š GRAND TOTAL",type:"success",message:`$${v.toFixed(2)}`,details:[`${N.length} files Â· Combined sales: $${v.toFixed(2)}`]}]:i}),m(!1),o==null||o()},O=s=>{const g=Array.from(s.target.files??[]);g.length>0&&V(g),s.target.value=""},q=s=>{s.preventDefault(),E(!1);const g=Array.from(s.dataTransfer.files);g.length>0&&V(g)},X=()=>h([]),ee=x.filter(s=>s.type==="success").length,z=x.filter(s=>s.type==="error").length;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex flex-col items-center justify-center w-full h-28 rounded-lg border-2 border-dashed transition-colors cursor-pointer ${S?"border-cw bg-cw/10":"border-border hover:border-cw/50 hover:bg-surface-2/50"}`,onDragOver:s=>{s.preventDefault(),E(!0)},onDragLeave:()=>E(!1),onDrop:q,children:[n?e.jsxs("div",{className:"flex items-center gap-2 text-cw",children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),e.jsxs("span",{className:"text-sm",children:["Processing ",x.filter(s=>s.type==="success"||s.type==="error").length+1,"/",x.length,"..."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-8 h-8 text-text-muted mb-1"}),e.jsxs("span",{className:"text-sm text-text-secondary",children:["Drop Employee Reports (.csv / .xlsx) or ",e.jsx("span",{className:"text-cw",children:"browse"})]}),e.jsx("span",{className:"text-[10px] text-text-muted mt-0.5",children:"Select multiple files â€” they'll be processed by date order"})]}),e.jsx("input",{ref:Q,type:"file",accept:".xlsx,.xls,.csv",multiple:!0,className:"hidden",onChange:O,disabled:n})]}),x.length>0&&e.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-surface-2/50 border-b border-border",children:[e.jsx("span",{className:"text-xs text-text-secondary font-medium",children:n?`Processing ${x.filter(s=>s.type==="success"||s.type==="error").length}/${x.length}...`:`Done â€” ${ee} uploaded${z>0?`, ${z} failed`:""}`}),!n&&e.jsx("button",{onClick:X,className:"text-text-muted hover:text-text-secondary",children:e.jsx(ue,{size:14})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto divide-y divide-border/50",children:x.map((s,g)=>e.jsxs("div",{className:"px-3 py-1.5 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="success"&&e.jsx(he,{size:13,className:"text-success shrink-0"}),s.type==="error"&&e.jsx(fe,{size:13,className:"text-danger shrink-0"}),s.type==="processing"&&e.jsx(G,{size:13,className:"text-cw animate-spin shrink-0"}),s.type==="pending"&&e.jsx("div",{className:"w-[13px] h-[13px] rounded-full border border-border shrink-0"}),e.jsx("span",{className:"text-text-primary truncate flex-1",children:s.fileName}),s.reportDate&&e.jsx("span",{className:"text-text-muted shrink-0",children:s.reportDate}),e.jsx("span",{className:`shrink-0 ${s.type==="success"?"text-success":s.type==="error"?"text-danger":"text-text-muted"}`,children:s.message})]}),s.details&&s.details.length>0&&e.jsx("div",{className:"mt-1 ml-5 space-y-0.5",children:s.details.map((i,N)=>e.jsx("p",{className:"text-text-muted text-[10px] break-all",children:i},N))})]},g))})]})]})}const Ee=[{id:"creator_report",title:"Creator Report",description:"Infloww Creator Reports (.xlsx) â€” model revenue, fans, traffic, OF ranking",icon:re,format:".xlsx",frequency:"Daily",source:"Infloww â†’ Creator Statistics â†’ Export",color:"text-cw",bgColor:"bg-cw/10"},{id:"employee_report",title:"Employee Report",description:"Inflow Employee Reports (.csv/.xlsx) â€” chatter KPIs, sales, CVR, messages",icon:de,format:".csv / .xlsx",frequency:"Daily",source:"Inflow â†’ Employee Statistics â†’ Export",color:"text-success",bgColor:"bg-success/10"}];function He(){const{profile:o}=ce(),[d,n]=p.useState(null),[m,x]=p.useState([]),[h,S]=p.useState(!0),[E,Q]=p.useState("uploaded_at"),[U,Z]=p.useState("desc"),[V,O]=p.useState(null),[q,X]=p.useState(!1),[ee,z]=p.useState(!1),[s,g]=p.useState(!1),i=p.useCallback(async()=>{S(!0);const[t,c,a]=await Promise.all([w.from("csv_uploads").select("*, uploader:profiles!csv_uploads_uploaded_by_fkey(full_name)").order("uploaded_at",{ascending:!1}).limit(50),w.from("model_daily_stats").select("date"),w.from("chatter_daily_stats").select("date")]),f=t.data??[],l=j=>{const B=new Map;for(const D of j)B.set(D.date,(B.get(D.date)??0)+1);return Array.from(B.entries()).map(([D,I])=>({date:D,cnt:I}))},r=l(c.data??[]),b=l(a.data??[]),Y=f.map(j=>{if(j.report_date)return j;const D=(j.upload_type==="creator_report"?r:j.upload_type==="employee_report"?b:[]).filter(R=>R.cnt===j.row_count);if(D.length===1)return{...j,report_date:D[0].date};if(D.length>1){const R=new Date(j.uploaded_at).getTime();return D.sort((P,A)=>{const H=Math.abs(R-new Date(P.date+"T12:00:00Z").getTime()),se=Math.abs(R-new Date(A.date+"T12:00:00Z").getTime());return H-se}),{...j,report_date:D[0].date}}const I=j.file_name.replace(/[^0-9]/g,"");if(I.length>=6){const R=I.slice(0,2),P=I.slice(2,4),A=I.slice(4,6),H=parseInt(A)+2e3,se=new Date(H,parseInt(P)-1,parseInt(R));if(!isNaN(se.getTime()))return{...j,report_date:`${H}-${P}-${R}`}}return j});x(Y),S(!1)},[]);p.useEffect(()=>{i()},[i]);const N=()=>{n(null),i()},[v,u]=p.useState(null),k=async t=>{X(!0),u(null);try{if(t.report_date){if(t.upload_type==="creator_report"){const{error:a}=await w.from("model_daily_stats").delete().eq("date",t.report_date);if(a)throw new Error(`Failed to delete stats data: ${a.message}`)}else if(t.upload_type==="employee_report"){const{error:a}=await w.from("chatter_daily_stats").delete().eq("date",t.report_date);if(a)throw new Error(`Failed to delete stats data: ${a.message}`)}}const{error:c}=await w.from("csv_uploads").delete().eq("id",t.id);if(c)throw new Error(`Failed to delete upload record: ${c.message}`);O(null),i()}catch(c){u(c instanceof Error?c.message:"Delete failed"),O(null)}finally{X(!1)}},T=async()=>{g(!0),u(null);try{const{error:t}=await w.from("chatter_daily_stats").delete().gte("date","1900-01-01");if(t)throw new Error(`chatter_daily_stats: ${t.message}`);const{error:c}=await w.from("model_daily_stats").delete().gte("date","1900-01-01");if(c)throw new Error(`model_daily_stats: ${c.message}`);const{error:a}=await w.from("csv_uploads").delete().gte("uploaded_at","1900-01-01");if(a)throw new Error(`csv_uploads: ${a.message}`);z(!1),i()}catch(t){u(t instanceof Error?t.message:"Clear failed"),z(!1)}finally{g(!1)}},M=p.useMemo(()=>m.filter(t=>t.upload_type==="creator_report"),[m]),_=p.useMemo(()=>m.filter(t=>t.upload_type==="employee_report"),[m]),$=p.useCallback(t=>[...t].sort((c,a)=>{let f,l;E==="report_date"?(f=c.report_date||"0000-00-00",l=a.report_date||"0000-00-00"):(f=c.uploaded_at,l=a.uploaded_at);const r=f.localeCompare(l);return U==="desc"?-r:r}),[E,U]),W=p.useMemo(()=>$(M),[$,M]),F=p.useMemo(()=>$(_),[$,_]),J=t=>{E===t?Z(c=>c==="desc"?"asc":"desc"):(Q(t),Z("desc"))},L=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),te=t=>{const c=Date.now()-new Date(t).getTime(),a=Math.floor(c/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const f=Math.floor(a/60);return f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`},y=(t,c)=>{const a=E===t;return e.jsxs("button",{onClick:()=>J(t),className:`flex items-center gap-1 text-xs px-2.5 py-1.5 rounded-lg transition-colors ${a?"bg-cw/10 text-cw font-semibold":"text-text-muted hover:text-text-secondary hover:bg-surface-2"}`,children:[a?U==="desc"?e.jsx(be,{size:12}):e.jsx(je,{size:12}):e.jsx(we,{size:12}),c]},t)},K=(t,c)=>t.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(oe,{size:20,className:"text-text-muted mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-text-muted text-xs",children:c})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left px-4 py-2.5 text-xs text-text-muted font-medium",children:"File"}),e.jsx("th",{className:"text-left px-4 py-2.5 text-xs text-text-muted font-medium",children:"Rows"}),e.jsx("th",{className:"text-left px-4 py-2.5 text-xs text-text-muted font-medium",children:"Report Date"}),e.jsx("th",{className:"text-left px-4 py-2.5 text-xs text-text-muted font-medium",children:"Uploaded"}),e.jsx("th",{className:"text-left px-4 py-2.5 text-xs text-text-muted font-medium",children:"By"})]})}),e.jsx("tbody",{children:t.map(a=>{var l;const f=V===a.id;return e.jsxs("tr",{className:"border-b border-border/50 hover:bg-surface-2/30 group",children:[e.jsx("td",{className:"px-4 py-2.5",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-text-primary font-medium truncate max-w-[180px]",children:a.file_name}),f?e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>k(a),disabled:q,className:"text-[10px] px-1.5 py-0.5 rounded bg-danger/20 text-danger hover:bg-danger/30 disabled:opacity-50",children:q?e.jsx(G,{size:10,className:"animate-spin"}):"Delete"}),e.jsx("button",{onClick:()=>O(null),disabled:q,className:"text-[10px] px-1.5 py-0.5 rounded bg-surface-3 text-text-muted hover:bg-surface-2",children:"Cancel"})]}):e.jsx("button",{onClick:()=>O(a.id),className:"p-0.5 rounded hover:bg-danger/10 text-text-muted hover:text-danger transition-colors shrink-0",title:"Delete upload and its data",children:e.jsx(ne,{size:12})})]})}),e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-text-secondary",children:a.row_count})}),e.jsx("td",{className:"px-4 py-2.5",children:a.report_date?e.jsxs("span",{className:"text-text-secondary text-xs flex items-center gap-1.5",children:[e.jsx(me,{size:12,className:"text-text-muted"}),L(a.report_date+"T00:00:00")]}):e.jsx("span",{className:"text-text-muted text-xs",children:"â€”"})}),e.jsxs("td",{className:"px-4 py-2.5",children:[e.jsx("span",{className:"text-text-muted text-xs",title:new Date(a.uploaded_at).toLocaleString(),children:te(a.uploaded_at)}),e.jsx("span",{className:"text-text-muted text-[10px] block",children:L(a.uploaded_at)})]}),e.jsx("td",{className:"px-4 py-2.5",children:e.jsx("span",{className:"text-text-secondary text-xs",children:((l=a.uploader)==null?void 0:l.full_name)??"Unknown"})})]},a.id)})})]})});return e.jsxs("div",{className:"p-4 lg:p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-text-primary",children:"Upload Center"}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Upload daily reports. Data syncs automatically to all dashboards."})]}),e.jsx("div",{className:"grid gap-3 mb-8",children:Ee.map(t=>{const c=d===t.id;return e.jsxs("div",{className:`bg-surface-1 border rounded-xl overflow-hidden transition-all ${c?"border-cw/40":"border-border hover:border-border-light"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 p-5 cursor-pointer",onClick:()=>n(c?null:t.id),children:[e.jsx("div",{className:`w-11 h-11 rounded-xl ${t.bgColor} flex items-center justify-center shrink-0`,children:e.jsx(t.icon,{size:22,className:t.color})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-text-primary",children:t.title}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-surface-3 text-text-muted font-semibold",children:t.frequency})]}),e.jsx("p",{className:"text-sm text-text-secondary mt-0.5",children:t.description}),e.jsxs("p",{className:"text-[11px] text-text-muted mt-1",children:["Source: ",t.source," Â· Format: ",t.format]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[!c&&e.jsx("div",{className:"w-10 h-10 rounded-xl border border-dashed border-border-light flex items-center justify-center hover:border-cw/40 hover:bg-cw/5",children:e.jsx(oe,{size:16,className:"text-text-muted"})}),c?e.jsx(ge,{size:16,className:"text-text-muted"}):e.jsx(ye,{size:16,className:"text-text-muted"})]})]}),c&&e.jsxs("div",{className:"px-5 pb-5 border-t border-border pt-4",children:[t.id==="creator_report"&&e.jsx(xe,{onUploadComplete:N}),t.id==="employee_report"&&e.jsx(Se,{onUploadComplete:N})]})]},t.id)})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{size:16,className:"text-text-muted"}),e.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Recent Uploads"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted mr-1",children:"Sort by"}),y("uploaded_at","Upload date"),y("report_date","Report date"),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),ee?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-danger",children:"Delete ALL data?"}),e.jsx("button",{onClick:T,disabled:s,className:"text-[10px] px-2 py-1 rounded bg-danger/20 text-danger hover:bg-danger/30 disabled:opacity-50 font-medium",children:s?e.jsx(G,{size:10,className:"animate-spin"}):"Yes, clear everything"}),e.jsx("button",{onClick:()=>z(!1),disabled:s,className:"text-[10px] px-2 py-1 rounded bg-surface-3 text-text-muted hover:bg-surface-2",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-1 text-[10px] px-2 py-1 rounded text-text-muted hover:text-danger hover:bg-danger/10 transition-colors",children:[e.jsx(ne,{size:10}),"Clear all"]})]})]}),v&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-danger/10 border border-danger/20 flex items-start gap-2",children:[e.jsx("span",{className:"text-danger text-sm",children:v}),e.jsx("button",{onClick:()=>u(null),className:"ml-auto text-danger/60 hover:text-danger text-xs shrink-0",children:"dismiss"})]}),h?e.jsx("div",{className:"bg-surface-1 border border-border rounded-xl p-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-text-secondary",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-cw/30 border-t-cw rounded-full animate-spin"}),"Loading history..."]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-surface-1 border border-border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-border",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-cw/10 flex items-center justify-center",children:e.jsx(re,{size:14,className:"text-cw"})}),e.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Creator Reports"}),e.jsxs("span",{className:"text-[10px] text-text-muted ml-auto",children:[M.length," ",M.length===1?"upload":"uploads"]})]}),K(W,"No Creator Reports uploaded yet")]}),e.jsxs("div",{className:"bg-surface-1 border border-border rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-border",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-success/10 flex items-center justify-center",children:e.jsx(de,{size:14,className:"text-success"})}),e.jsx("h3",{className:"text-sm font-semibold text-text-primary",children:"Employee Reports"}),e.jsxs("span",{className:"text-[10px] text-text-muted ml-auto",children:[_.length," ",_.length===1?"upload":"uploads"]})]}),K(F,"No Employee Reports uploaded yet")]})]})]})}export{He as default};
