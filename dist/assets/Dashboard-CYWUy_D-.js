import{c as i,r as h,U as R,f as l,k as u,j as e,l as S,m as M}from"./index-CA8Xytnn.js";import{M as T}from"./ModelAvatar-C78ZsIZU.js";import{u as U,P as z,a as D}from"./useTrafficData-C-yBA9A2.js";import{C as A}from"./CreatorReportUpload-DZsbECgt.js";import{D as F}from"./dollar-sign-CGtoqXjG.js";import{T as L}from"./trending-up-DzPvdVSv.js";import{R as $,B,X as P,Y as H,T as W,a as I,C as X}from"./BarChart-Bz_zD4zc.js";import{X as E}from"./x-B1RhxLkA.js";import{M as K}from"./minus-jQmmtfBl.js";import"./trending-down-CbLCgBVi.js";import"./loader-circle-Dg5TS0lw.js";import"./circle-check-big-BmlN0me0.js";import"./circle-alert-DcVd9WJ1.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=i("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=i("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=i("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=i("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);function ie(){const[f,a]=h.useState(!1),[c,g]=h.useState("Live"),[o,b]=h.useState("workload"),{modelTraffic:x,loading:n,refresh:j}=U(),d=x.filter(s=>c==="all"||s.model_status===c).sort((s,t)=>o==="revenue"?t.earnings_per_day-s.earnings_per_day:o==="fans"?t.new_fans_avg-s.new_fans_avg:o==="workload"?t.workload_pct-s.workload_pct:s.model_name.localeCompare(t.model_name)),r=x.filter(s=>s.model_status==="Live"),y=r.reduce((s,t)=>s+t.earnings_per_day,0),v=r.reduce((s,t)=>s+t.tips_per_day,0),w=r.reduce((s,t)=>s+t.new_fans_avg,0),N=r.length,m=r.filter(s=>s.earnings_per_day>0).length,_=[...new Set(x.map(s=>s.model_status))].sort(),p=d.filter(s=>s.earnings_per_day>0).slice(0,15).map(s=>({name:s.model_name.length>12?s.model_name.slice(0,12)+"…":s.model_name,revenue:Math.round(s.earnings_per_day)})),k=({pct:s})=>{if(Math.abs(s)<1)return e.jsxs("span",{className:"text-text-muted text-[10px] flex items-center gap-0.5",children:[e.jsx(K,{size:10})," —"]});const t=s>0;return e.jsxs("span",{className:`text-[10px] flex items-center gap-0.5 ${t?"text-success":"text-danger"}`,children:[t?e.jsx(q,{size:12}):e.jsx(Y,{size:12}),Math.abs(s).toFixed(0),"%"]})},C=[{label:"Revenue / day",value:l(y),icon:F,color:"text-cw",bgColor:"bg-cw/10"},{label:"Live Models",value:`${N}`,sub:`${m} reporting`,icon:R,color:"text-success",bgColor:"bg-success/10"},{label:"New Fans / day",value:u(Math.round(w)),icon:L,color:"text-cw-light",bgColor:"bg-cw-light/10"},{label:"Tips / day",value:l(v),icon:Z,color:"text-warning",bgColor:"bg-warning/10"}];return e.jsxs("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-extrabold text-text-primary",children:"Model Performance"}),e.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Daily averages from Creator Reports · ",m," models reporting"]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-cw hover:bg-cw-dark text-white rounded-lg text-sm font-medium",children:[e.jsx(S,{size:16})," Upload Creator Report"]})})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4 mb-6",children:C.map(s=>e.jsxs("div",{className:"bg-surface-1 border border-border rounded-xl p-4 lg:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs lg:text-sm text-text-secondary",children:s.label}),e.jsx("div",{className:`w-8 h-8 rounded-lg ${s.bgColor} flex items-center justify-center`,children:e.jsx(s.icon,{size:16,className:s.color})})]}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-white",children:n?"—":s.value}),"sub"in s&&s.sub&&e.jsx("p",{className:"text-[10px] text-text-muted mt-1",children:s.sub})]},s.label))}),!n&&p.length>0&&e.jsxs("div",{className:"bg-surface-1 border border-border rounded-xl p-5 mb-6",children:[e.jsx("h2",{className:"text-sm font-semibold text-white mb-4",children:"Revenue / day by Model"}),e.jsx($,{width:"100%",height:220,children:e.jsxs(B,{data:p,margin:{top:5,right:5,bottom:5,left:5},children:[e.jsx(P,{dataKey:"name",tick:{fill:"#888888",fontSize:10},axisLine:{stroke:"#2a2a2a"},tickLine:!1,angle:-35,textAnchor:"end",height:60}),e.jsx(H,{tick:{fill:"#555555",fontSize:10},axisLine:!1,tickLine:!1,tickFormatter:s=>`$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`}),e.jsx(W,{contentStyle:{background:"#1a1a1a",border:"1px solid #2a2a2a",borderRadius:8,fontSize:12},labelStyle:{color:"#ffffff",fontWeight:600},formatter:s=>[`$${s.toLocaleString()}/day`,"Revenue"],cursor:{fill:"rgba(29, 155, 240, 0.08)"}}),e.jsx(I,{dataKey:"revenue",radius:[4,4,0,0],children:p.map((s,t)=>e.jsx(X,{fill:t===0?"#1d9bf0":t<3?"#1680c7":"#1a5a8a"},t))})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{size:14,className:"text-text-muted"}),e.jsxs("select",{value:c,onChange:s=>g(s.target.value),className:"bg-surface-1 border border-border rounded-lg px-3 py-1.5 text-sm text-white focus:border-cw focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),_.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:o,onChange:s=>b(s.target.value),className:"bg-surface-1 border border-border rounded-lg px-3 py-1.5 text-sm text-white focus:border-cw focus:outline-none",children:[e.jsx("option",{value:"revenue",children:"Sort: Revenue"}),e.jsx("option",{value:"fans",children:"Sort: New Fans"}),e.jsx("option",{value:"workload",children:"Sort: Workload"}),e.jsx("option",{value:"name",children:"Sort: Name"})]})]}),e.jsxs("span",{className:"text-xs text-text-muted",children:[d.length," models"]})]}),e.jsx("div",{className:"bg-surface-1 border border-border rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-border",children:["Model","Type","Revenue/day","Trend","New Fans/day","Tips/day","Msg Rev/day","Workload"].map(s=>e.jsx("th",{className:"text-left px-4 py-3.5 text-text-secondary font-medium text-xs uppercase tracking-wider",children:s},s))})}),e.jsx("tbody",{children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-5 py-12 text-center text-text-secondary",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-cw/30 border-t-cw rounded-full animate-spin"}),"Loading..."]})})}):d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-5 py-12 text-center text-text-secondary",children:"No models found. Upload a Creator Report to see performance data."})}):d.map(s=>e.jsxs("tr",{className:"border-b border-border/50 hover:bg-surface-2/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(T,{name:s.model_name,size:"sm"}),e.jsx("span",{className:`absolute -bottom-0.5 -right-0.5 w-2 h-2 rounded-full border border-surface-1 ${s.model_status==="Live"?"bg-success":s.model_status==="On Hold"?"bg-warning":"bg-danger"}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium",children:s.model_name}),s.team_names.length>0&&e.jsx("p",{className:"text-[10px] text-text-muted",children:s.team_names.join(", ")})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(z,{pageType:s.page_type,size:"sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-white font-medium",children:s.earnings_per_day>0?l(s.earnings_per_day):"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(k,{pct:s.earnings_trend_pct})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-text-secondary",children:s.new_fans_avg>0?u(Math.round(s.new_fans_avg)):"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-text-secondary",children:s.tips_per_day>0?l(s.tips_per_day):"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-text-secondary",children:s.message_earnings_per_day>0?l(s.message_earnings_per_day):"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(D,{traffic:s,showTrend:!0})})]},s.model_id))})]})})}),!n&&m===0&&e.jsxs("div",{className:"mt-4 bg-surface-1 border border-cw/30 rounded-xl p-5 text-center",children:[e.jsx(M,{size:24,className:"text-cw mx-auto mb-2"}),e.jsx("p",{className:"text-white font-medium mb-1",children:"No performance data yet"}),e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"Upload a Creator Report (.xlsx) from Infloww to populate revenue, fans, and tips data."}),e.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-cw hover:bg-cw-dark text-white rounded-lg text-sm font-medium",children:"Upload Creator Report"})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>a(!1),children:e.jsxs("div",{className:"bg-surface-1 border border-border rounded-2xl p-6 w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Upload Creator Report"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-secondary hover:text-white",children:e.jsx(E,{size:20})})]}),e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Upload the Creator Report (.xlsx) from Infloww. Creator names must match model names in the system."}),e.jsx(A,{onUploadComplete:()=>{j(),a(!1)}})]})})]})}export{ie as default};
